const e="https://paradigma.atlassian.net";async function s(s){const t=`${e}/rest/api/2/issue/${s}?fields=summary,status,assignee,issuetype`,a=new Headers;a.append("Accept","application/json");try{const r=await fetch(t,{method:"GET",headers:a,credentials:"include"});if(!r.ok){const e=await r.text();return{success:!1,error:`API Error ${r.status} (${r.statusText})`,data:e}}const i=await r.json();return{success:!0,data:{title:i.fields.summary,status:i.fields.status.name,avatarUrl:i.fields.assignee?i.fields.assignee.avatarUrls["24x24"]:null,assigneeName:i.fields.assignee?i.fields.assignee.displayName:"Sin asignar",issueType:i.fields.issuetype.name,issueTypeIconUrl:i.fields.issuetype.iconUrl,url:`${e}/browse/${s}`}}}catch(e){return{success:!1,error:`Network error: ${e.message}`}}}function t(){const e="jira-enhancer-main-script";if(document.getElementById(e))return;const s=document.createElement("script");s.id=e,s.type="module",s.src=chrome.runtime.getURL("main.js"),(document.head||document.documentElement).appendChild(s)}chrome.runtime.onMessage.addListener(((e,t,a)=>{if("GET_SUBTASK_DETAILS"===e.type)return s(e.issueKey).then((e=>a(e))).catch((e=>a({success:!1,error:e.toString()}))),!0})),chrome.tabs.onUpdated.addListener(((s,a,r)=>{if("complete"===a.status&&r.url&&r.active){const a=r.url.startsWith(e),i=r.url.includes("/boards/")||r.url.includes("/RapidBoard.jspa");a&&i&&(chrome.scripting.insertCSS({target:{tabId:s},files:["styles.css"]}).catch((e=>{})),chrome.scripting.executeScript({target:{tabId:s},func:t}).catch((e=>{})))}}));